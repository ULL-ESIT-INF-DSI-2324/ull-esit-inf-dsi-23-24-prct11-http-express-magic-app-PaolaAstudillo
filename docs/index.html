<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>doc-test</title><meta name="description" content="Documentation for doc-test"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">doc-test</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>doc-test</h2></div><div class="tsd-panel tsd-typography"><a id="md:práctica-11---aplicación-express-para-coleccionistas-de-cartas-magic" class="tsd-anchor"></a><h1><a href="#md:práctica-11---aplicación-express-para-coleccionistas-de-cartas-magic"><strong>Práctica 11 - Aplicación Express para coleccionistas de cartas Magic</strong></a></h1><p>Nombre: Paola Astudillo Capote
Gmail: <a href="mailto:alu010337418@ull.edu.es">alu010337418@ull.edu.es</a></p>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct11-http-express-magic-app-PaolaAstudillo?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct11-http-express-magic-app-PaolaAstudillo/badge.svg?branch=main" alt="Coverage Status"></a></p>
<p><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct11-http-express-magic-app-PaolaAstudillo"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct11-http-express-magic-app-PaolaAstudillo&metric=alert_status" alt="Quality Gate Status"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct11-http-express-magic-app-PaolaAstudillo/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct11-http-express-magic-app-PaolaAstudillo/actions/workflows/node.js.yml/badge.svg" alt="Tests"></a></p>
<a id="md:introducción" class="tsd-anchor"></a><h2><a href="#md:introducción">Introducción</a></h2><p>En esta práctica haré uso de la aplicación <code>express</code> y utilizaré la práctica 10 de base, con algunas mejoras sugeridas por el profesor. Usaré el protocolo <code>HTTP</code> mediante <code>Thunder Client</code>
Además comentaré la solución propuesta para el ejercicio desarrollado durante la hora de PE.</p>
<a id="md:objetivos" class="tsd-anchor"></a><h2><a href="#md:objetivos">Objetivos</a></h2><ul>
<li>Desarrollo de la aplicación</li>
<li>Ejercicio del PE </li>
<li>Conclusión</li>
</ul>
<a id="md:desarrollo" class="tsd-anchor"></a><h2><a href="#md:desarrollo">Desarrollo</a></h2><a id="md:desarrollo-de-la-aplicación" class="tsd-anchor"></a><h3><a href="#md:desarrollo-de-la-aplicación">Desarrollo de la aplicación</a></h3><p>Para cumplir con los requerimientos del enunciado, tuve que hacer ciertos ajustes sobre la práctica base, en primer lugar, eliminé los CommandHandler, FileHandler, Client y Server para simplificar la estructura de la aplicación. Y en su lugar, utilicé los archivos App, Card, CardCollection y CardRoute. A continuación explicaré la función de cada uno de ellos:</p>
<p><code>App.ts</code>: sirve como punto de entrada de nuestra aplicación Express. En este archivo, configuramos el servidor Express, establecemos las rutas de la API y escuchamos las solicitudes entrantes en un puerto específico. Utilizamos el middleware <code>express.json()</code> para analizar el cuerpo de las solicitudes entrantes en formato JSON, lo que nos permite trabajar fácilmente con los datos enviados por los clientes. Además, importamos y utilizamos las rutas definidas en <code>CardRoute.ts</code>, lo que nos proporciona una estructura organizada para manejar las solicitudes relacionadas con las cartas. Finalmente, iniciamos el servidor para que esté listo para recibir y procesar las solicitudes de los clientes.</p>
<p><code>Card.ts</code>: definimos la clase <code>MagicCard</code>, que encapsula los atributos y comportamientos de una carta Magic. Utilizamos enumeraciones para representar los colores, tipos y rarezas posibles de las cartas, lo que nos proporciona una forma estructurada y segura de definir estas propiedades. Además, implementamos un método <code>toJSON()</code> en la clase <code>MagicCard</code>, que nos permite convertir los datos de una carta a formato JSON, facilitando su serialización y envío a través de la red. Este archivo no sufrió mucho cambio con respecto a la práctica nterior.</p>
<p><code>CardCollection.ts</code>: aqui se intentó gestionar la colección de cartas de un usuario mediante la clase <code>MagicCardCollection</code>. Utilizando un mapa para almacenar las cartas, intentando garantizar la unicidad de los IDs y proporcionar un acceso eficiente a las cartas por su ID. Implementé métodos asincrónicos para cargar, escribir, añadir, actualizar y eliminar cartas de la colección, intentando sin éxito que los cambios en la colección se reflejen correctamente en el sistema de archivos. Además, manejé los errores de lectura y escritura del archivo de colección, proporcionando retroalimentación adecuada al usuario en caso de errores.</p>
<p><code>CardRoute.ts</code>: define las rutas de la API de la aplicación Express, que permiten realizar operaciones sobre la colección de cartas de un usuario. Utilizamos los métodos HTTP adecuados (POST, GET, DELETE, PATCH) para asociar cada ruta con una acción específica sobre las cartas. Extraemos los datos de las solicitudes entrantes (como el nombre de usuario, el ID de la carta, etc.) y los pasamos a los métodos correspondientes de <code>MagicCardCollection</code> para realizar las operaciones solicitadas. Además, manejamos los errores y devolvemos respuestas adecuadas en formato JSON, proporcionando retroalimentación clara al cliente sobre el resultado de la operación solicitada.</p>
<p>Por último para cada endpoint de la API, proporcionamré ejemplos de uso para ilustrar cómo interactuar con la aplicación:</p>
<ul>
<li><strong>Añadir una carta a la colección:</strong></li>
</ul>
<pre><code><span class="hl-0">POST</span><span class="hl-1"> </span><span class="hl-2">http</span><span class="hl-1">:</span><span class="hl-3">//localhost:3000/api/cards?username=Paola</span>
</code><button>Copy</button></pre>
<p>{
    &quot;id&quot;: 123,
    &quot;name&quot;: &quot;Nombre de la carta&quot;,
    &quot;manaCost&quot;: 3,
    &quot;color&quot;: &quot;Red&quot;,
    &quot;type&quot;: &quot;Creature&quot;,
    &quot;rarity&quot;: &quot;Common&quot;,
    &quot;text&quot;: &quot;Texto de la carta&quot;,
    &quot;marketValue&quot;: 10,
    &quot;powerToughness&quot;: [2, 2],
    &quot;loyalty&quot;: null,
    &quot;username&quot;: &quot;Paola&quot;
}</p>
<ul>
<li><strong>Listar las cartas existentes en una colección:</strong></li>
</ul>
<pre><code><span class="hl-0">GET</span><span class="hl-1"> </span><span class="hl-2">http</span><span class="hl-1">:</span><span class="hl-3">//localhost:3000/api/cards?username=Paola</span>
</code><button>Copy</button></pre>
<ul>
<li><strong>Mostrar la información de una carta concreta:</strong></li>
</ul>
<pre><code><span class="hl-0">GET</span><span class="hl-1"> </span><span class="hl-2">http</span><span class="hl-1">:</span><span class="hl-3">//localhost:3000/api/cards/2?username=Paola</span>
</code><button>Copy</button></pre>
<ul>
<li><strong>Eliminar una carta de la colección:</strong></li>
</ul>
<pre><code><span class="hl-0">DELETE</span><span class="hl-1"> </span><span class="hl-2">http</span><span class="hl-1">:</span><span class="hl-3">//localhost:3000/api/cards/2?username=Paola</span>
</code><button>Copy</button></pre>
<ul>
<li><strong>Modificar una carta existente:</strong></li>
</ul>
<pre><code><span class="hl-0">PATCH</span><span class="hl-1"> </span><span class="hl-2">http</span><span class="hl-1">:</span><span class="hl-3">//localhost:3000/api/cards/2?username=Paola</span>
</code><button>Copy</button></pre>
<p>{
    &quot;name&quot;: &quot;modi&quot;,
    &quot;color&quot;: &quot;Blue&quot;,
    &quot;text&quot;: &quot;Nuevo texto de la carta&quot;,
    &quot;marketValue&quot;: 15
}</p>
<p>NOTA: El id de la carta se coloca como parte de la ruta (path) de la URL, para asegurarnos de que siempre es introducido, lo que indica que estás solicitando la información de una carta específica con el ID 2. Mientras que el parámetro username se incluye como un parámetro de consulta (query parameter), lo que sugiere que estás filtrando las cartas por usuario. </p>
<a id="md:ejercicio-del-pe" class="tsd-anchor"></a><h3><a href="#md:ejercicio-del-pe">Ejercicio del PE</a></h3><p>Para realizar la modificación sugerida en el PE, he tenido que hacer uso de promesas. En mi caso, ya había entregado esta práctica con async/await, pero durante el ejercicio, modifiqué los dos métodos solicitados utilizando resolve/reject y then/catch. Después de hacer estos pequeños cambios, intenté realizar pruebas, pero no lograron ejecutarse ya que no encontraban los datos.</p>
<a id="md:conclusión" class="tsd-anchor"></a><h3><a href="#md:conclusión">Conclusión</a></h3><p>Tras realizar esta práctica, he podido familiarizarme con la aplicación de Express. Aunque he logrado hacer peticiones HTTP, siempre han sido erróneas, ya que aún no he conseguido arreglar el error de almacenamiento de las cartas. Por lo tanto, simula que realiza su función, pero a la hora de hacer comprobaciones, nunca encuentra ninguna carta o crea usuarios si no existen al añadir una carta, pero su contenido está vacío. En resumen, considero que he podido entender el funcionamiento general de las peticiones y la configuración de Express, aunque no haya podido solucionar dicho problema. Por último, cabe destacar que, las pruebas nunca funcionarán debido a este error de almacenamiento de cartas no corregido, por ello no hay ningun archivo de pruebas para comprobarlas.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:práctica-11---aplicación-express-para-coleccionistas-de-cartas-magic"><span>Práctica 11 -<wbr/> <wbr/>Aplicación <wbr/>Express para coleccionistas de cartas <wbr/>Magic</span></a><ul><li><a href="#md:introducción"><span>Introducción</span></a></li><li><a href="#md:objetivos"><span>Objetivos</span></a></li><li><a href="#md:desarrollo"><span>Desarrollo</span></a></li><li><ul><li><a href="#md:desarrollo-de-la-aplicación"><span>Desarrollo de la aplicación</span></a></li><li><a href="#md:ejercicio-del-pe"><span>Ejercicio del PE</span></a></li><li><a href="#md:conclusión"><span>Conclusión</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>doc-test</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>